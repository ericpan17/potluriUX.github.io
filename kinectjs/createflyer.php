<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html style="" xmlns="http://www.w3.org/1999/xhtml"><head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
     <title>Create your flyer. 114 templates prefilled. just edit and save or print. Share the flyers and see the improvement in stats.</title>
     <!--<meta charset="utf-8">-->
	 <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
             <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link href="Time%20Tracking%20and%20Invoicing%20Software%20Pricing%20-%20Harvest_files/1.css" rel="stylesheet" type="text/css"></head>
  <link href="Time%20Tracking%20and%20Invoicing%20Software%20Pricing%20-%20Harvest_files/application-0755dafe7a0d2f21f6eb5e93ca475fd7.css" media="all" rel="stylesheet">
 
<!-- Optional theme -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">


<!-- Latest compiled and minified JavaScript -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    
     <link rel="stylesheet" href="Create%20your%20flyer_files/style.css">
	 <link rel="stylesheet" href="Create%20your%20flyer_files/zerogrid.css" type="text/css" media="all">
	 <link rel="stylesheet" href="Create%20your%20flyer_files/responsive.css" type="text/css" media="all">
	 <link rel="stylesheet" href="Create%20your%20flyer_files/responsiveslides.css">
	 <script src="Create%20your%20flyer_files/ca-pub-5320253718237505.js" type="text/javascript" async=""></script><script src="Create%20your%20flyer_files/sdk.js" id="facebook-jssdk"></script><script type="text/javascript" src="Create%20your%20flyer_files/jquery-1.js"></script>
<!--     <script src="Create%20your%20flyer_files/jquery_003.js"></script>
     <script src="Create%20your%20flyer_files/jquery_004.js"></script>
          <script src="Create%20your%20flyer_files/jquery_005.js"></script>
       <script src="Create%20your%20flyer_files/jquery_002.js"></script> //@potluri 9/3/2014 958pm speeding app-->
     <script src="Create%20your%20flyer_files/jquery_006.js"></script>
     <script src="Create%20your%20flyer_files/jquery-migrate-1.js"></script>
     
<!--     <script src="Create%20your%20flyer_files/superfish.js"></script>@potluri 9/3/2014-->

     <script src="Create%20your%20flyer_files/tms-0.js"></script>
   
	 <!--<script type="text/javascript" src="Create%20your%20flyer_files/css3-mediaqueries.js"></script>@potluri 9/3/2014-->
     <script src="Create%20your%20flyer_files/responsiveslides.js"></script>
	 <script>
	    $(function () {
	      $("#slider").responsiveSlides({
	        auto: true,
	        pager: false,
	        nav: true,
	        speed: 480,
	        maxwidth: 960,
	        namespace: "centered-btns"
	      });
	    });
	 </script>
    
	  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <script type="text/javascript" src="Create%20your%20flyer_files/jquery-ui-1.js"></script>
  <script type="text/javascript" src="Create%20your%20flyer_files/spectrum.js"></script>
  <link rel="stylesheet" href="Create%20your%20flyer_files/spectrum.css">
  <link rel="stylesheet" href="Create%20your%20flyer_files/jquery-ui-1.css">
  <!--<link rel="stylesheet" type="text/css" href="style.css" />-->
  <script src="Create%20your%20flyer_files/kineticjs.js"></script>
  <script type="text/javascript" src="Create%20your%20flyer_files/jquery.js"></script>
  <link rel="stylesheet" href="Create%20your%20flyer_files/jquery.css">


<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Aclonica:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Audiowide:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Candal:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Ceviche One:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Denk One:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Emblema One:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Fascinate Inline:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Germania One:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Henny Penny:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Keania One:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Limelight:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=MedievalSharp:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Miltonian Tattoo:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Nosifer:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Oleo Script:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Paytone One:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Rum Raisin:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Sansita One:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Special Elite:400,700,400italic,700italic'></link>

<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Tangerine:400,700,400italic,700italic'></link>

<?php //require("../header.php");?>

<!--=======content================================-->
  <script>
   
  $(function() {
  
   
  
      $("#couleur").spectrum({//text color
    color: "#e95e0c",//4f7f02
	showInput: true
	});
	$("#couleur2").spectrum({//rect
    color: "#f5f9df",//f8f9f1
	showInput: true
	});
	$("#contour").spectrum({//outline
    color: "#e99f84",//FFFFFF
	showInput: true
	});

  
    $( "#slider" ).slider({
		//range: "max",
		min: 20,
		max: 200,
		value:30,
		slide: function( event, ui ) {
			$( "#valeur" ).val( ui.value );
		}
	});
	$( "#valeur" ).val( $( "#slider" ).slider( "value" ) );
	
	$( "#slider_rotation" ).slider({
		//range: "max",
		min: 0,
		max: 360,
		value: 0,
		slide: function( event, ui ) {
			$( "#rotation" ).val( ui.value );
		}
	});
	$( "#rotation" ).val( $( "#slider_rotation" ).slider( "value" ) );

	
	// fonction permettant de changer les colorpickers en fonction du style choisi
	
	
	var couleur_1 = "#e95e0c";
	var contour_1 = "#e99f84";
	var couleur_2 = "#ffffff";
	var contour_2 = "#FFFFFF";
	
	/*var style = new Array(
		"",
		new Array(#4f7f02,#FFFFFF),
		new Array(#ffffff,#FFFFFF)
	);*/
	
	var style = ["",[couleur_1,contour_1],[couleur_2,contour_2]];

	
	$('#select_style').change(
		function(){
			//alert(couleur_1);
			
			if($('#select_style').val()!="3"){
				$('#perso').css("display","none");
			}
			
			var style_select = $('#select_style').val();
			//alert(style_select);
			
			$("#couleur").spectrum({
			color: style[style_select][0],
			showInput: true,
			});
			
			$("#contour").spectrum({
			color: style[style_select][1],
			showInput: true,
			});	
			
			$("#couleur").val(style[style_select][0]);
			$("#contour").val(style[style_select][1]);
			

		}
	);
	
	$('#couleur').change(
		function(){
			$('#perso').css("display","block");
			$('#select_style').val("3");
		}
	);
	
	$('#contour').change(
		function(){
			$('#perso').css("display","block");
			$('#select_style').val("3");
		}
	);
	
	 $("select#select_font").fontSelector({
		options: {
		  inSpeed: 250,
		  outSpeed: "slow",
		}
	});
  });

  </script>

<div id="content">
	<div class="zerogrids">
	

		

		
		<div style="width:100%;">
			<div id="banner" class="container"><!--<img src="images/img04.jpg" width="1000" height="300" alt="" />--></div>
			<div id="page" class="container">
      
				<div id="content" style="float:left;">
					<div id="box1">	
						<div id="container" style="width:450px; height:630px; border:solid 1px #222;margin-bottom:30px;"><div role="presentation" class="kindeticjs-content" style="position: relative; display: inline-block; width: 450px; height: 630px;"><canvas height="630" width="450" style="padding: 0px; margin: 0px; border: 0px none; background: none repeat scroll 0% 0% transparent; position: absolute; top: 0px; left: 0px; width: 450px; height: 630px;"></canvas></div></div>
					</div>
                                    <span class="glyphicon glyphicon-save" style="font-size:20px;margin-left:10px"><input style="width:200px;" id="save_png" value="Generate" name="bouton" class="testbutton button button-medium button-green" type="button">
                            <input id='save_pdf' value='PDF' class='button button-medium button-green' type='button'>
				</div>
				<div id="sidebar" style="float:left;padding-left:30px;width:400px">
                                    <div id="sidebar-container">
                                        
 
                                        <div class="panel panel-primary">
                                        <div class="panel-heading">
    <h3 class="panel-title"><span class="glyphicon glyphicon-pencil">
                                        Text</h3></div>
					<br>
							<div class="panel-body"><table class="table_form_cover">
                                                            
								<tbody>
                                                                    <tr>
                                                                        
                                                                        <td style='width:25%;padding-bottom:10px;' colspan='2'>
                                                                        Rectangle Around Text: 
                                                                        </td >
                                                                        <td style='width:75%;padding-bottom:10px;'>    
                                                                            <input type="radio" id='yes' name="bckyesorno" value="yes" checked>Yes 
                                                                            <input type="radio" id='no' name="bckyesorno" value="no" >No
                                                                                Rectangle Color:<input style="display: none;" id="couleur2" value="#f5f9df" type="text">
                                                                 </td>   </tr>
                                                                    
                                                                    <tr>
                                                                        
                                                                        <td  style="width:25%;padding-bottom:10px;">Text:</td>
                                                                        <td colspan="2" style="padding-bottom:10px;">
                                                                            <textarea  id="texte1" style="width: 265px; height: 130px;" rows="2" cols="50"></textarea></td>
								</tr>
								<tr>
									<!--<td colspan="2" style="width:35%;">Police:</td>-->
									<td style="padding-bottom:10px;">Font:</td>
									<td colspan="2" style="padding-bottom:10px;">
										<!--<link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_028.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_019.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_026.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_020.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_016.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_011.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_030.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_002.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_027.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_025.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_004.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_014.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_007.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_005.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_040.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_039.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_024.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_021.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_023.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_032.css"><link rel="stylesheet" type="text/css" href="Create%20your%20flyer_files/css_018.css">-->
                                                                                                                                                                    
                                                                                                                                                                    <select id="select_font" style="width: 100%; display: none;">
										
																							<option selected="selected" value="Aclonica">Aclonica</option>
																							<option value="Audiowide">Audiowide</option>
																							<option value="Candal">Candal</option>
																							<option value="Ceviche One">Ceviche One</option>
																							<option value="Denk One">Denk One</option>
																							<option value="Emblema One">Emblema One</option>
																							<option value="Fascinate Inline">Fascinate</option>
																							<option value="Germania One">Germania One</option>
																							<option value="Henny Penny">Henny Penny</option>
																							<option value="Keania One">Keania One</option>
																							<option value="Limelight">Limelight</option>
																							<option value="MedievalSharp">MedievalSharp</option>
																							<option value="Miltonian Tattoo">Miltonian</option>
																							<option value="Nosifer">Nosifer</option>
																							<option value="Oleo Script">Oleo Script</option>
																							<option value="Paytone One">Paytone One</option>
																							<option value="Roboto">Roboto</option>
																							<option value="Rum Raisin">Rum Taisin</option>
																							<option value="Sansita One">Sansita One</option>
																							<option value="Special Elite">Special Elite</option>
																							<option value="Tangerine">Tangerine</option>
																					</select>
								</tr>
								<tr>
									<td  style="width:35%;padding-bottom:10px;">Style:</td>
									<td colspan="2" style="padding-bottom:10px;">
										<select id="select_style">
											<option selected="selected" value="1">Style 1</option>
											<option value="2">Style 2</option>
											<option id="perso" style="display:none;" value="3">Perso</option>
										</select>
									</td>
								</tr>
								<tr>
									<td  style="padding-bottom:10px;">Font Color:</td>
									<td colspan="2" style="padding-bottom:10px;">
										<input style="display: none;" id="couleur" value="#e95e0c" type="text">
                                                                                   
                                                                                       
                                                                                   Outline: <input style="display: none;" id="contour" value="#e99f84" type="text"> 
                                                                                      
                                                                                       
									</td>
								</tr>
								<tr>
									<td style="padding-bottom:10px;">Font Size:</td>
									<td style="padding-right:10px;padding-bottom:10px;"><input value="50" id="valeur" name="text_size" style="width:50px;" type="text"></td>
									<td style="padding-bottom:10px;">
										<div aria-disabled="false" style="max-width: 960px;" class="centered-btns centered-btns1 ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" id="slider"><a style="left: 11.7647%;" class="ui-slider-handle ui-state-default ui-corner-all" href="#"></a></div>
									</td>
								</tr>
								<tr>
									<td style="padding-bottom:10px;">Rotation:</td>
									<td style="padding-right:10px;padding-bottom:10px;"><input value="0" id="rotation" name="text_size" style="width:50px;" type="text"></td>
									<td style="padding-bottom:10px;">
										<div aria-disabled="false" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" id="slider_rotation"><a style="left: 0%;" class="ui-slider-handle ui-state-default ui-corner-all" href="#"></a></div>
									</td>
								</tr>
								<tr>
									<td style="padding-bottom:10px;">Your Image: </td>
									<td><span class="glyphicon glyphicon-picture" style="font-size:20px"></span></td>
									<td style="padding-bottom:10px;">
										<input id="imageLoader" name="imageLoader" type="file">
									</td>
								</tr>
								<tr>
									<td colspan="3" style="text-align:left;padding-bottom:10px;padding-top:10px;">
										<!--<input type="button" id="clear" value="Effacer" />
										<input type="button" id="preview" value="Ajouter" />-->
<!--										<img src="Create%20your%20flyer_files/Pencil-48.png" name="ajouter" title="add text">-->
                                                                                   <span class="glyphicon glyphicon-pencil" style="font-size:20px"></span> 
										<input style="width:200px;" id="preview" value="Add Text" name="bouton" class="testbutton btn  btn-primary" type="button">
                                                                                   
										<!--<img src="icones/Pencil-48.png" name="ajouter" id="preview" title="ajouter texte" />
										<img src="icones/Data-Erase-48.png" name="clear" id="clear" title="effacer tous les calques" />-->
									</td>
								</tr>
							</tbody></table>
							<form id="form_save" target="_self" action="createit.php" method="POST">
								<input 
                                                                       id="form_dataurl" name="form_dataurl" type="hidden">
								<input value="124" name="id_back" type="hidden">
							</form>
							
							
<!--						<table>
								<tbody><tr>
									<td>
										<img src="Create%20your%20flyer_files/png.png">
									</td>
									<td>
										
									</td>
								</tr>

						</tbody></table>-->
						
                                                  
				</div>
                                        </div></div>
			 
                            <!--<div style='float:left;padding-left:20px'>-->
                            <div class="panel panel-primary">
                                <div class="panel-heading">
                                    <h3 class="panel-title"><span class="glyphicon glyphicon-trash"></span>
        Delete</h3></div>
							<div class="panel-body">
							<table id="table_calques">
								<tbody><tr>
									<td colspan="2" id="no_layer">No Layer</td>
								</tr>
								<tr id="row_0" style="display:none;">
									<td style="width:80%;">Nber layers </td>
									<td><input size="2" id="nbre_layers" value="2" type="text"></td>
								</tr>
							</tbody></table>
							<br><i class="fa fa-eraser fa-5" style="font-size:20px"></i>
							<!--<img src="Create%20your%20flyer_files/Data-Erase-48.png" name="clear" title="clear all layers">-->
							<input  id="clear" value="Clear All Layers" name="bouton" class="testbutton  btn  btn-xs btn-danger " type="button">
                                     </div> </div>                      
                                                            
                            <!--</div>-->
                </div></div> 
                                

    
       
             
</div>
<!--==============================footer=================================-->

<script >
				//this is the main container(includes everything, the first layer in pixlr).		  
                                                    var stage = new Kinetic.Stage({
							container: 'container',
							width: 450,
							height: 630
						  });
						  
						  var layer = new Kinetic.Layer();
//here starts the events that will include in stage(main layer).first is canvas image 
						  var imageObj = new Image();
						  imageObj.onload = function() {
							var back_canvas = new Kinetic.Image({
							  x: 0,
							  y: 0,
							  image: imageObj,
							  width: 448,
							  height: 625
							});

							// add the shape to the layer
							layer.add(back_canvas);

							// add the layer to the stage
							stage.add(layer);
						  };
						  //imageObj.src = "cover/luchador.png";
                                                  //we pass id of image to the page or image name is parameter
                                                  //we use that parameter here. thats it.
                                                  
						  imageObj.src = "themes/<?php echo $_GET['category']?>/<?php echo $_GET['id']?>.jpg";//"themes/"+paramfromurl+".jpg";okati tarwatha okati wait oru min
						
						// on initialise la variable qui servira à compter le nbre de calques
						var nbre_layer = 0;
						
						var tableau_calques = new Array("layer_0");
                                                var text_spu = '';
						
    
   
						document.getElementById('preview').addEventListener('click', function() {
							  var nom_groupe=document.getElementById('texte1').value;
                                                          text_spu = nom_groupe;
							  if(nom_groupe.length>20){
								var nom_calque=nom_groupe.substr(0, 15)+"...";
							  }else{
								var nom_calque=nom_groupe;
							  }
							  var taille_groupe=document.getElementById('valeur').value;
							  var rotation_groupe=document.getElementById('rotation').value;
							  var couleur_groupe=document.getElementById('couleur').value;
                                                          var couleur_groupe2=document.getElementById('couleur2').value;
							  var contour_groupe=document.getElementById('contour').value;
							  var font_groupe=document.getElementById('select_font').value;
							  
							  // on add a layer
							  nbre_layer +=1;
							  document.getElementById('nbre_layers').value=nbre_layer;
							  $( "#no_layer").hide();
							  var id_calque="layer_"+nbre_layer;
							  
							  // on ajoute un champ dans le tableau calques, add layer 1 to table of layers
							  tableau_calques.push(id_calque);
							  
							  // on ajoute un tr dans la table calque à chaque ajout de texte,
							  var id_clear="clear_"+nbre_layer;
							  $( "#row_0" ).after( '<tr id="row_'+nbre_layer+'"><td style="min-width:100px;padding-top:7px;">'+nom_calque+'</td><td><span class="glyphicon glyphicon-trash"id="'+id_clear+'" onclick="effacer_calque('+nbre_layer+');" title="clear layer" style="cursor:pointer"></span>  </td></tr>' );
							 
							  // on créé un nouveau calque,built a new layer
							  tableau_calques[nbre_layer] = new Kinetic.Layer();
							  
							 // this["layer_"+nbre_layer] = new Kinetic.Layer();
							  var simpleText = new Kinetic.Text({
									x: stage.width() / 2,
									y: 15,
									text: nom_groupe,
									fontSize: taille_groupe,
									fontFamily: font_groupe+',Calibri',
									fill: couleur_groupe,
									stroke: contour_groupe,
									/*fill: '#C49D52',
									stroke:'#8A354A',*/
									draggable: true,
									rotation: rotation_groupe,
							  });
                                                          var radios = document.getElementsByName('bckyesorno');
var flag_radio = false;
for (var i = 0, length = radios.length; i < length; i++) {
    if (radios[i].checked) {
        // do whatever you want with the checked radio
        //alert(radios[i].value);
        if(radios[i].value == 'yes'){
            flag_radio=true;
        }
        // only one radio can be logically checked, don't check the rest
        break;
    }
}
 simpleText.offsetX(simpleText.width()/2);
if(flag_radio === true){//3 equals means type check. value okate check chestadi . like boolean false not equal to 0 type prakaram but value prakaram equal okok and i declared the variable as false. so if (false always fails. if(true always scuceeds.u can put var === true ur wish )
						 var rect = new Kinetic.Rect({
        x: 0,//480 is width of canvas s40 on left. means 40 + 400 + 40 so equal padding
        y: 0,
        //stroke: '#555',
       // strokeWidth: 2,
     //   fill: couleur_groupe2,
        width: simpleText.width()+100,//make this canvas width whole page ki osthadi appudu . vammooagu 
        height: simpleText.height()+20,
        draggable:true,
 fillLinearGradientStartPoint: {x:-50, y:-40},
          fillLinearGradientEndPoint: {x:-50,y:(simpleText.height()*2.5)},
          fillLinearGradientColorStops: [0, 'white', 1, couleur_groupe2],
      //  shadowColor: 'orange',
       // shadowBlur: 10,
     //   shadowOffset: {x:10,y:10},
     //   shadowOpacity: 0.2,
     //   cornerRadius: 5,
        
      });
    tableau_calques[nbre_layer].add(rect);
    }//ikkadiki ey kda
  //}
							  // on aligne le texte
							 
                                                       //   if(document.getelementbyid('bckyesorno')){
						
  
                                                  //  }
							  tableau_calques[nbre_layer].add(simpleText);
							  stage.add(tableau_calques[nbre_layer]);
                                                          //layer.remove(tableau_calques[nbre_layer]);
							  //document.getElementById('texte1').value="";
							  
							  
						}, false);
						
						
// Upload image --------------------------------------------------------  
var imageLoader = document.getElementById('imageLoader');
imageLoader.addEventListener('change', handleImage, false);
var tableau_calques_images = new Array("image_0");
var nbre_images = 0;
function handleImage(e){
var reader = new FileReader();
reader.onload = function(event){
	var imageObj = new Image();
	imageObj.onload = function(){
	
			// on ajoute un calque
		  nbre_layer +=1;
		  nbre_images +=1;
		  var id_calque_image="layer_"+nbre_layer;
		  tableau_calques_images[nbre_layer] = new Kinetic.Layer({ id:id_calque_image });
		  document.getElementById('nbre_layers').value=nbre_layer;
		  $( "#no_layer").hide();
		 
		  
		// on ajoute un champ dans le tableau calques
		  tableau_calques_images.push(id_calque_image);		
		
		// on ajoute un tr dans la table calque à chaque ajout de texte
		  var id_clear="clear_"+nbre_layer;
		  $( "#row_0" ).after( '<tr id="row_'+nbre_layer+'"><td style="min-width:100px;padding-top:7px;">Image '+nbre_images+'</td><td><span class="glyphicon glyphicon-trash" id="'+id_clear+'" onclick="effacer_calque_image(\''+id_calque_image+'\',\''+nbre_layer+'\');" title="effacer calque"></span></td></tr>' );
	
		
		var qr_code = new Kinetic.Image({
		 // x: stage.width(),
		  x: 10,
		  y: 15,
		  image: imageObj,
		  id:"image_"+nbre_layer,
		  draggable: true ,
//                  width: 418,
//		height: 592
		});	
		
		//tableau_calques[nbre_layer].add(qr_code);
		//stage.add(tableau_calques[nbre_layer]);
		//document.getElementById('texte1').value="";
		
		tableau_calques_images[nbre_layer].add(qr_code);
		stage.add(tableau_calques_images[nbre_layer]);
		
	};
	imageObj.src = event.target.result;
}
reader.readAsDataURL(e.target.files[0]);     
}
//************************************************************************
						
						
						
						// fonction effacer (vider le canvas)
						document.getElementById('clear').addEventListener('click', function() {
							stage.clear();
							var i = 1;
							for(var i=1;i<=nbre_layer;i++){
								/*tableau_calques[i].removeChildren();
								tableau_calques[i].clear();*/
								$( "#row_"+i ).hide();
							}
							$( "#no_layer").show();
							nbre_images =0;
							nbre_layer =0;
							var layer = new Kinetic.Layer();

						  var imageObj = new Image();
						  imageObj.onload = function() {
							var back_canvas = new Kinetic.Image({
							  x: 0,
							  y: 0,
							  image: imageObj,
							  width: 448,
							  height: 625
							});

							// add the shape to the layer
							layer.add(back_canvas);

							// add the layer to the stage
							stage.add(layer);
						  };
						  //imageObj.src = "cover/luchador.png";
						  imageObj.src = "themes/<?php echo $_GET['category']?>/<?php echo $_GET['id']?>.jpg";//"themes/"+paramfromurl+".jpg";okati tarwatha okati wait oru min
						;
							
							
						}, false);

						
						
						function effacer_calque_image(calque_a_effacer,nbre_calques){
								//
                                                                //alert(calque_a_effacer);
                                                                //alert(nbre_calques);
							//layer_qr.destroy();
								//calque_a_effacer.destroy();
							tableau_calques_images[nbre_calques].removeChildren();
							tableau_calques_images[nbre_calques].clear();
							$( "#row_"+nbre_calques ).hide();
							//nbre_images -=1;
						}
						
						
						//fonction effacer claque séparé
						function effacer_calque(calque_a_effacer){
                                                   // alert(calque_a_effacer);//delete funciton to clear layer
							// On efface le calque sélectionné
							tableau_calques[calque_a_effacer].removeChildren();
							tableau_calques[calque_a_effacer].clear();
							//alert(tableau_calques[calque_a_effacer]);
							// On masque le tr dans les calques
							$( "#row_"+calque_a_effacer ).hide();
							
						}
						
					document.getElementById('save_png').addEventListener('click', function() {
						// on recupère le datatourl et on le stocke dans une variable et on valide le formulmaire
						stage.toDataURL({
						  callback: function(dataUrl) {
                                                     document.getElementById('form_save').action = 'createit.php';
							document.getElementById('form_dataurl').value=dataUrl;
							document.getElementById('form_save').submit();
							//window.open(dataUrl);
						  }
						});
					}, false);
                                        	document.getElementById('save_pdf').addEventListener('click', function() {
						// on recupère le datatourl et on le stocke dans une variable et on valide le formulmaire
						stage.toDataURL({
						  callback: function(dataUrl) {
                                                      document.getElementById('form_save').action = './pdf/tutorial/tuto2.php';
							document.getElementById('form_dataurl').value=dataUrl;
							document.getElementById('form_save').submit();
							//window.open(dataUrl);
						  }
						});
					}, false);
                                      

  	
</script>

<div style="position: absolute; top: 10px; left: 0px;" class="sp-container sp-hidden sp-light sp-palette-disabled sp-initial-disabled"><div class="sp-palette-container"><div class="sp-palette sp-thumb sp-cf"></div></div><div class="sp-picker-container"><div class="sp-top sp-cf"><div class="sp-fill"></div><div class="sp-top-inner"><div style="background-color: rgb(157, 255, 0);" class="sp-color"><div class="sp-sat"><div class="sp-val"><div style="top: -5px; left: -5px;" class="sp-dragger"></div></div></div></div><div class="sp-hue"><div style="top: 20.0667px;" class="sp-slider"></div></div></div><div style="" class="sp-alpha"><div class="sp-alpha-inner"><div style="left: -3px;" class="sp-alpha-handle"></div></div></div></div><div class="sp-input-container sp-cf"><input value="#4f7f02" class="sp-input" spellcheck="false" type="text"></div><div class="sp-initial sp-thumb sp-cf"></div><div class="sp-button-container sp-cf"><a class="sp-cancel" href="#">cancel</a><button class="sp-choose">choose</button></div></div></div><div style="position: absolute; top: 10px; left: 0px;" class="sp-container sp-hidden sp-light sp-palette-disabled sp-initial-disabled"><div class="sp-palette-container"><div class="sp-palette sp-thumb sp-cf"></div></div><div class="sp-picker-container"><div class="sp-top sp-cf"><div class="sp-fill"></div><div class="sp-top-inner"><div style="background-color: rgb(255, 0, 0);" class="sp-color"><div class="sp-sat"><div class="sp-val"><div style="top: -5px; left: -5px;" class="sp-dragger"></div></div></div></div><div class="sp-hue"><div style="top: -3px;" class="sp-slider"></div></div></div><div style="" class="sp-alpha"><div class="sp-alpha-inner"><div style="left: -3px;" class="sp-alpha-handle"></div></div></div></div><div class="sp-input-container sp-cf"><input value="#ffffff" class="sp-input" spellcheck="false" type="text"></div><div class="sp-initial sp-thumb sp-cf"></div><div class="sp-button-container sp-cf"><a class="sp-cancel" href="#">cancel</a><button class="sp-choose">choose</button></div></div></div><a style="right: 50%; margin-right: -69px; display: none;" href="#" id="toTop"><span id="toTopHover"></span></a></body></html>